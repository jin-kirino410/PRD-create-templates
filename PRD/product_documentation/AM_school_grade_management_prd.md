# Product Requirements Document (PRD)
## AM - 学校・学年出しわけ機能追加

### 1. 概要

#### 1.1 プロダクト名
AM (既存プロダクト)

#### 1.2 機能名
学校・学年出しわけ機能

#### 1.3 バージョン
既存バージョン + 新機能

#### 1.4 作成日
2024年12月19日

#### 1.5 作成者
[作成者名]

#### 1.6 承認者
[承認者名]

### 2. プロダクト概要

#### 2.1 プロダクトの目的
既存のAMプロダクトに、サービスの学校・学年出しわけを行う機能を追加し、教育機関における適切なデータ管理とアクセス制御を実現する。

#### 2.2 ターゲットユーザー
- **システム管理者**: 全体の設定と管理
- **オーナーアカウントの管理者権限**: 複数スクールの統括管理
- **スクールアカウントの管理者権限**: 個別スクールの管理

**注意**: 一般ユーザー権限は対象外

#### 2.3 主要機能
- 学校情報の管理（追加・編集・削除）
- 学年情報の管理（追加・編集・削除）
- 学校・学年によるデータ出しわけ
- 権限に基づくアクセス制御
- データの階層構造管理

### 3. ビジネス要件

#### 3.1 ビジネス目標
- 教育機関向けサービスの市場拡大
- データセキュリティの向上
- 管理業務の効率化
- 顧客満足度の向上

#### 3.2 成功指標（KPI）
- 学校・学年管理機能の利用率
- データアクセスエラーの削減率
- 管理者の作業効率向上率
- 顧客サポート問い合わせの削減率

#### 3.3 制約事項
- 既存システムへの影響を最小限に抑制
- 既存データの整合性を保持
- パフォーマンスへの影響を最小限に抑制

### 4. 機能要件

#### 4.1 必須機能
**学校管理機能**
- 学校情報の登録・編集・削除
- 学校コードの管理
- 学校名・住所・連絡先情報の管理
- 学校の有効/無効状態管理

**学年管理機能**
- 学年情報の登録・編集・削除
- 学年コードの管理
- 学年名・開始年度・終了年度の管理
- 学年の有効/無効状態管理

**データ出しわけ機能**
- 学校・学年によるデータフィルタリング
- 階層構造に基づくデータ表示
- 権限に応じたデータアクセス制御

**権限管理機能**
- 管理者権限レベルの設定
- 学校・学年単位でのアクセス制御
- 権限の継承・委譲機能

#### 4.2 重要機能
**検索・フィルタリング機能**
- 学校・学年による高度な検索
- 複数条件での絞り込み
- 検索結果のエクスポート

**監査ログ機能**
- データアクセス履歴の記録
- 変更履歴の追跡
- セキュリティ監査対応

#### 4.3 将来検討機能
**高度な分析機能**
- 学校・学年別の利用統計
- トレンド分析
- 予測分析

**自動化機能**
- 学年の自動更新
- データの自動バックアップ
- 定期レポートの自動生成

### 5. 非機能要件

#### 5.1 パフォーマンス
- データ出しわけ処理: 3秒以内
- 検索・フィルタリング: 2秒以内
- 同時アクセス: 100ユーザー以上

#### 5.2 セキュリティ
- 管理者権限の厳格な制御
- データアクセスの監査ログ
- 暗号化通信の実装
- セッション管理の強化

#### 5.3 可用性
- システム稼働率: 99.9%以上
- 障害復旧時間: 4時間以内
- データバックアップ: 日次

#### 5.4 スケーラビリティ
- 学校数: 10,000校まで対応
- 学年数: 学校あたり20学年まで対応
- データ量: 既存システムの2倍まで対応

### 6. ユーザー体験

#### 6.1 ユーザージャーニー
**システム管理者**
1. ログイン → 全体設定画面
2. 学校・学年の基本設定
3. 権限レベルの設定
4. システム全体の監視

**オーナーアカウント管理者**
1. ログイン → 管理対象スクール一覧
2. スクール別の設定・管理
3. 学年情報の管理
4. データの出しわけ確認

**スクールアカウント管理者**
1. ログイン → 自校の管理画面
2. 学年別のデータ管理
3. ユーザー権限の管理
4. データの確認・操作

#### 6.2 UI/UX要件
- 直感的で分かりやすいインターフェース
- 権限レベルに応じた画面表示
- 階層構造を視覚的に表現
- レスポンシブデザイン対応

### 7. 技術要件

#### 7.1 技術スタック
- 既存システムとの互換性を保持
- データベース: 既存DB + 新規テーブル
- フロントエンド: 既存フレームワーク
- バックエンド: 既存API + 新規エンドポイント

#### 7.2 アーキテクチャ
- 既存システムへの影響を最小限に抑制
- モジュール化された設計
- APIファーストアプローチ
- マイクロサービス対応

#### 7.3 統合要件
- 既存認証システムとの連携
- 既存データベースとの統合
- 既存ログシステムとの連携
- 既存バックアップシステムとの統合

### 8. リスクと課題

#### 8.1 技術的リスク
**既存システムへの影響**
- 対策: 段階的な実装とテスト
- 影響度: 中、発生確率: 中

**データ整合性の維持**
- 対策: 厳密なデータ検証とロールバック機能
- 影響度: 高、発生確率: 低

**パフォーマンスへの影響**
- 対策: パフォーマンステストと最適化
- 影響度: 中、発生確率: 中

#### 8.2 ビジネスリスク
**ユーザー受け入れ性**
- 対策: ユーザビリティテストとフィードバック収集
- 影響度: 中、発生確率: 中

**競合他社の対応**
- 対策: 市場調査と差別化戦略
- 影響度: 低、発生確率: 中

### 9. スケジュール

#### 9.1 マイルストーン
**Phase 1: 基本設計・開発環境構築** (4週間)
- 要件定義の詳細化
- 技術設計書の作成
- 開発環境の構築

**Phase 2: コア機能開発** (8週間)
- 学校・学年管理機能の開発
- データ出しわけ機能の開発
- 権限管理機能の開発

**Phase 3: 統合・テスト** (4週間)
- 既存システムとの統合
- 総合テスト
- パフォーマンステスト

**Phase 4: リリース・運用** (2週間)
- 本番環境への展開
- ユーザートレーニング
- 運用開始

#### 9.2 リリース計画
- **α版**: Phase 2完了後 (12週間後)
- **β版**: Phase 3完了後 (16週間後)
- **正式版**: Phase 4完了後 (18週間後)

### 10. 成功基準

#### 10.1 受け入れ基準
- 学校・学年管理機能が正常に動作
- データ出しわけが正確に実行される
- 権限制御が適切に機能する
- 既存システムへの影響がない

#### 10.2 品質基準
- バグ発生率: 1%以下
- パフォーマンス要件を満たす
- セキュリティ要件を満たす
- ユーザビリティテストで80%以上の満足度

---

## 付録

### A. 用語集
- **AM**: 既存のプロダクト名
- **出しわけ**: データを特定の条件で分類・分離すること
- **スクールアカウント**: 個別の学校を管理するアカウント
- **オーナーアカウント**: 複数のスクールを統括管理するアカウント

### B. 参考資料
- 既存AMプロダクトの仕様書
- 既存システムのアーキテクチャ図
- データベース設計書
- API仕様書

### C. 変更履歴
| 日付 | 変更内容 | 変更者 |
|------|----------|--------|
| 2024/12/19 | 初版作成 | [作成者名] |
